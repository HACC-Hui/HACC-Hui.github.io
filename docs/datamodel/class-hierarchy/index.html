<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">Collection Class Hierarchy | HACC Hui</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Collection Class Hierarchy | HACC Hui"><meta data-react-helmet="true" name="description" content="Based upon our experience with HACC Hui, we&#x27;ve wrapped every MongoDB collection by a Javascript class with the same name. As we implemented this encapsulation, we observed that there was common functionality that could be abstracted out into a set of two superclasses:"><meta data-react-helmet="true" property="og:description" content="Based upon our experience with HACC Hui, we&#x27;ve wrapped every MongoDB collection by a Javascript class with the same name. As we implemented this encapsulation, we observed that there was common functionality that could be abstracted out into a set of two superclasses:"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/datamodel/class-hierarchy"><link data-react-helmet="true" rel="shortcut icon" href="/img/hacc.png"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/datamodel/class-hierarchy"><link rel="stylesheet" href="/styles.2d35ee25.css">
<link rel="preload" href="/styles.98e88111.js" as="script">
<link rel="preload" href="/runtime~main.41fbc9d0.js" as="script">
<link rel="preload" href="/main.19b7285a.js" as="script">
<link rel="preload" href="/1.6e9ef8ff.js" as="script">
<link rel="preload" href="/2.54eef3a5.js" as="script">
<link rel="preload" href="/40.3fb8835d.js" as="script">
<link rel="preload" href="/41.b7bd94d7.js" as="script">
<link rel="preload" href="/20ac7829.41db34af.js" as="script">
<link rel="preload" href="/2ff9cfc9.251c866a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/hacc.png" alt="HACC Hui"><strong class="navbar__title">HACC Hui</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/HACC-Hui/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/hacc.png" alt="HACC Hui"><strong class="navbar__title">HACC Hui</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview/introduction">Docs</a></li><li class="menu__list-item"><a href="https://github.com/HACC-Hui/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/motivation">Motivation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">DeveloperGuide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/meteor-app/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/slackbot/create-hacc-hui-slackbot">Creating HACC Hui bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/meteor-app/running-hacc-hui">Running HACC Hui</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/meteor-app/ide">IDE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/meteor-app/source-code-organization">Source code organization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/meteor-app/coding-standards">Coding Standards</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Requirements</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">User Stories</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/installers">Installer Stories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/administrators">Admin Stories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/participants">Participant Stories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/future">Future Directions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Milestones</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/milestone1">Milestone 1, Sept. 10</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/milestone2">Milestone 2, Sept. 24</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/milestone3">Milestone 3, Oct. 8</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/requirements/milestone4">Milestone 4, Oct. 22</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Data Model</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/datamodel/class-hierarchy">Collection Class Hierarchy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/datamodel/entity-relationship-model">Entity-Relationship Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/datamodel/validated-methods">Validated Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/datamodel/jsdoc-api">HACC-Hui API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Team Procedures</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/teams/creation">ICS414F20 Teams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/teams/milestone-procedures">414 Milestone Flow</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How to...</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/build-a-release">Build a release</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/deploy-a-release">Deploy a release</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/reset-db">Reset the database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/docker-management">Docker management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers/deployment/howto/setup-https">Setup HTTPS</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Collection Class Hierarchy</h1></header><div class="markdown"><p>Based upon our experience with <a href="https://radgrad.github.io">HACC Hui</a>, we&#x27;ve wrapped every MongoDB collection by a Javascript class with the same name. As we implemented this encapsulation, we observed that there was common functionality that could be abstracted out into a set of two superclasses:</p><ul><li><em>BaseCollection</em>.  All classes (with the single exception of the UserCollection class) inherit either directly or indirectly from BaseCollection. This class provides the methods and fields used to manage a MongoDB collection that are common across HACC Hui.</li><li><em>BaseSlugCollection</em>.  This class extends BaseCollection with methods to support the MongoDB collections whose documents must include a &quot;slug&quot;. For more details, see the section on <a href="/docs/datamodel/entity-relationship-model#slugs">slugs</a>.</li></ul><p>Here is the resulting HACC Hui collection class hierarchy:</p><img src="/img/datamodel/HACCHuiCollectionClassHierarchy.png" width="100%"><p>There is one exceptional class: UserCollection, which does not inherit from any of the Base classes.  This is because the UserCollection class encapsulates a &quot;special&quot; MongoDB collection managed by the Meteor.Accounts package. The behavior of this collection is sufficiently different from regular user-defined collections that we did not feel it was appropriate to make it a subclass of any other class. </p><p>All collections that extend BaseCollection are required to implement three methods:</p><ol><li><p><strong>define(definitionData)</strong>: The <code>define</code> method creates a document in the collection. It returns the <code>_id</code> of the resulting document. The <code>define</code> method takes and object as its one parameter. The values in the object that refer to other documents should use <a href="/docs/datamodel/entity-relationship-model#slugs">slugs</a>. This supports the loading from a database fixture. The <a href="https://github.com/HACC-Hui/HACC-Hui/blob/master/app/imports/api/base/BaseCollection.js#L35">BaseCollection.define</a> throws an exception.</p></li><li><p><strong>update(docID, updateData)</strong>: The <code>update</code> method supports changing certain fields of a document. Some fields are immutable by design. The <code>update</code> method takes two parameters, the docID or slug that identifies which document to update, and an object containing the fields to change. The <a href="https://github.com/HACC-Hui/HACC-Hui/blob/master/app/imports/api/base/BaseCollection.js#L45">BaseCollection.update</a> method throws an exception.</p></li><li><p><strong>dumpOne(docID)</strong>: The <code>dumpOne</code> method creates a JSON object representing the document. HACC Hui uses the dump object to restore the document. Restoring an object is calling define using the dump object. This means that the dump object should have slugs not IDs. The <code>dumpOne</code> method has one parameter the docID to dump.  The <a href="https://github.com/HACC-Hui/HACC-Hui/blob/master/app/imports/api/base/BaseCollection.js#L214">BaseCollection.dumpOne</a> method throws an exception.</p></li></ol><p>Complex collections should also implement two methods:</p><ol><li><p><strong>removeIt(docID)</strong>: The <code>removeIt</code> method removes a single document from the collection. This may have side affects depending on the relationships between collections. The method takes one parameter, the docID or slug, that defines which document to remove. The <code>removeIt</code> method may throw a Meteor exception if there are other documents refering to it.</p></li><li><p><strong>assertValidRoleForMethod(userId)</strong>: The <code>assertValidRoleForMethod</code> method checks to see if the user is in the correct role to run the Meteor method. The <a href="https://github.com/HACC-Hui/HACC-Hui/blob/master/app/imports/api/base/BaseCollection.js#L248">BaseCollection</a> implements this method only allowing <code>Administrators</code> to call the methods.</p></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/datamodel/class-hierarchy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/requirements/milestone4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Milestone 4, Due Oct. 22nd.</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/datamodel/entity-relationship-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Entity-Relationship Model »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/motivation">Motivation</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a href="https://hacc.hawaii.gov" target="_blank" rel="noopener noreferrer" class="footer__link-item">Hawaii Annual Code Challenge 2020</a></li><li class="footer__item"><a href="https://hacc2020.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">hacc2020.slack.com</a></li><li class="footer__item"><a href="https://github.com/HACC-Hui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">HACC Hui GitHub</a></li><li class="footer__item"><a href="https://courses.ics.hawaii.edu/ics414f20" target="_blank" rel="noopener noreferrer" class="footer__link-item">ICS 414 Course Website</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 University of Hawaii. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.98e88111.js"></script>
<script src="/runtime~main.41fbc9d0.js"></script>
<script src="/main.19b7285a.js"></script>
<script src="/1.6e9ef8ff.js"></script>
<script src="/2.54eef3a5.js"></script>
<script src="/40.3fb8835d.js"></script>
<script src="/41.b7bd94d7.js"></script>
<script src="/20ac7829.41db34af.js"></script>
<script src="/2ff9cfc9.251c866a.js"></script>
</body>
</html>